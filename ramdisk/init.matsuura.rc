#
# Init script for Matsuura Kernel to set on boot
# Nicklas Van Dam @ XDA
# プロジェクト　ラブライブ | Project Matsuura (2018)
#

on post-fs-data

	# Adjust CPU Modules for Governor,Frequency and other features
	write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1242000
	write /sys/devices/system/cpu/cpu1/cpufreq/scaling_max_freq 1242000

	# Adjust Power Efficient Workqueue
	chmod 0644 /sys/module/workqueue/parameters/power_efficient
	write /sys/module/workqueue/parameters/power_efficient "Y"

	# Adjust Intelli Plug
	write /sys/module/intelli_plug/parameters/intelli_plug_active 1
	write /sys/module/intelli_plug/parameters/touch_boost_active 1
	write /sys/module/intelli_plug/parameters/nr_run_profile_sel 3
	write /sys/module/intelli_plug/parameters/cpu_nr_run_threshold 722
	write /sys/module/intelli_plug/parameters/nr_run_hysteresis 4
	write /sys/module/intelli_plug/parameters/screen_off_max 384000

	# Adjust Intelli Thermal
	write /sys/module/msm_thermal/core_control/enabled 1
	write /sys/module/msm_thermal/parameters/limit_temp_degC 60
	write /sys/module/msm_thermal/parameters/core_limit_temp_degC 70
	write /sys/module/msm_thermal/parameters/thermal_limit_low 2
	write /sys/module/msm_thermal/parameters/thermal_limit_high 11
	write /sys/module/msm_thermal/parameters/poll_ms 250

	# Adjust Display Configurations
	write /sys/android_touch/doubletap2wake 2

	# Adjust I/O Schedulers
	write /sys/block/mmcblk0/queue/scheduler "bfq"
	write /sys/block/mmcblk1/queue/scheduler "bfq"
	write /sys/block/mmcblk0/queue/read_ahead_kb 512

	# Adjust Misc Configurations
	write /sys/module/mmc_core/parameters/use_spi_crc 0
	write /sys/kernel/sched/gentle_fair_sleepers 0
	write /sys/kernel/dyn_fsync/Dyn_fsync_active 1
	write /sys/module/wakeup/parameters/enable_smb135x_wake_ws "N"
	write /sys/module/wakeup/parameters/enable_si_ws "N"
	write /sys/module/wakeup/parameters/enable_msm_hsic_ws "N"
	write /sys/module/wakeup/parameters/enable_wlan_ctrl_wake_ws "N"
	write /sys/module/wakeup/parameters/enable_wlan_rx_wake_ws "N"
	write /sys/module/wakeup/parameters/enable_wlan_wake_ws "N"

on property:sys.boot_completed=1
	
	# Adjust CPU Modules for Governor,Frequency and other features
	write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor Lionheart
	write /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor Lionheart
	write /sys/devices/system/cpu/cpufreq/Lionheart/down_threshold 30
	write /sys/devices/system/cpu/cpufreq/Lionheart/freq_step 5
	write /sys/devices/system/cpu/cpufreq/Lionheart/ignore_nice_load 0
	write /sys/devices/system/cpu/cpufreq/Lionheart/sampling_down_factor 1
	write /sys/devices/system/cpu/cpufreq/Lionheart/sampling_rate 10000
	write /sys/devices/system/cpu/cpufreq/Lionheart/sampling_rate_min 10000
	write /sys/devices/system/cpu/cpufreq/Lionheart/up_threshold 65
